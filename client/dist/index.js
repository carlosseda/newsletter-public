(()=>{var e={76:()=>{class e extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){document.addEventListener("showDeleteModal",(e=>{this.url=e.detail.url,this.id=e.detail.id,this.shadow.querySelector(".modal-delete").classList.add("active")})),document.addEventListener("hideOverlayer",(()=>{this.shadow.querySelector(".modal-delete").classList.contains("active")&&this.shadow.querySelector(".modal-delete").classList.remove("active")})),this.render()}render(){this.shadow.innerHTML='\n        <style>\n            .modal-delete{\n                background-color: hsl(0, 0%, 100%);\n                position: fixed;\n                left: 0;\n                right: 0;\n                margin-left: auto;\n                margin-right: auto;\n                opacity: 0;\n                top: 30%;\n                transition: opacity 0.3s ease;\n                width: 40%;\n                z-index: -1;\n            }\n\n            .modal-delete.active{\n                opacity: 1;\n                z-index: 3000;\n            }\n            \n            .modal-delete-header{\n                background-color: $grey;\n                border-bottom: 1px solid #e9ecef;\n                padding: 0.5em 1em;\n                text-align: center;\n            }\n\n            .modal-delete-header h4{\n                font-size: 1.2em;\n                font-family: \'Roboto\', sans-serif;\n                margin: 0;\n            }\n            \n            .modal-delete-footer{\n                display: flex;\n            }\n\n            .modal-delete-option{\n                color: hsl(0, 0%, 100%);\n                cursor: pointer;\n                font-weight: 600;\n                font-family: \'Roboto\', sans-serif;\n                text-align: center;\n                width: 50%;\n            }\n\n            .modal-delete-option#delete-cancel{\n                background-color: hsl(183, 98%, 35%);;\n            }\n\n            .modal-delete-option#delete-confirm{\n                background-color: hsl(0, 65%, 55%);\n            }\n        </style>\n\n        <div class="modal-delete">\n            <div class="modal-delete-content">\n\n                <div class="modal-delete-header">\n                    <h4>¿Quiere eliminar este registro?</h4>\n                </div>\n\n                <div class="modal-delete-footer">\n                    <div class="modal-delete-option" id="delete-confirm">\n                        <h4>Sí</h4>\n                    </div>\n                    <div class="modal-delete-option " id="delete-cancel">\n                        <h4>No</h4>\n                    </div>\n                </div>\n            </div>\n        </div>\n        ',this.shadow.querySelector("#delete-confirm").addEventListener("click",(()=>{fetch(this.url,{method:"DELETE",headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}).then((e=>e.json())).then((e=>{document.dispatchEvent(new CustomEvent("refreshTable")),document.dispatchEvent(new CustomEvent("refreshForm")),document.dispatchEvent(new CustomEvent("message",{detail:{message:e.message,type:"success"}})),document.dispatchEvent(new CustomEvent("hideOverlayer")),this.shadow.querySelector(".modal-delete").classList.remove("active")})).catch((e=>{document.dispatchEvent(new CustomEvent("message",{detail:{message:e.message,type:"error"}}))}))})),this.shadow.querySelector("#delete-cancel").addEventListener("click",(()=>{document.dispatchEvent(new CustomEvent("hideOverlayer")),this.shadow.querySelector(".modal-delete").classList.remove("active")}))}}customElements.define("delete-element-modal-component",e)},384:()=>{class e extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["message","type"]}connectedCallback(){document.addEventListener("message",(e=>{this.setAttribute("message",e.detail.message),this.setAttribute("type",e.detail.type)})),this.render()}attributeChangedCallback(e,t,n){if("message"==e){let e=this.shadow.querySelector("#alert-message");e.classList.add("active"),this.shadow.querySelector("p").textContent=n,setTimeout((function(){e.classList.remove("active")}),7e3)}"type"==e&&this.shadow.querySelector("#alert-message").classList.add(n)}render(){this.shadow.innerHTML='\n        <style>\n            #alert-message{\n                background-color: hsl(0, 0%, 100%);\n                bottom: 3vh;\n                opacity: 0;\n                padding: 0 1em;\n                position: fixed;\n                transition: opacity 0.3s;\n                right: 5%;\n                width: max-content;\n                z-index: -1;\n            }\n\n            #alert-message.success{\n                border-bottom: 0.2em solid hsl(207, 85%, 69%);\n            }\n\n            #alert-message.error{\n                border-bottom: 0.2em solid hsl(0, 100%, 50%);\n            }\n\n            #alert-message.active{\n                opacity: 1;\n                z-index: 1;\n            }\n\n            p{\n                font-family: \'Roboto\', sans-serif;\n                font-size: 1.2em;\n            }\n        </style>\n\n        <div id="alert-message">\n            <p></p>\n            <div id="alert-color"></div>\n        </div>'}}customElements.define("alert-message-component",e)},631:()=>{class e extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){document.addEventListener("showOverlayer",(()=>{this.shadow.querySelector(".overlayer").classList.add("active")})),document.addEventListener("hideOverlayer",(()=>{this.shadow.querySelector(".overlayer").classList.remove("active")})),this.render()}render(){this.shadow.innerHTML='\n        <style>\n            .overlayer {\n                background-color: rgba(0, 0, 0, 0.5);\n                height: 100%;\n                left: 0;\n                opacity: 0;\n                position: fixed;\n                top: 0;\n                transition: opacity 0.3s;\n                width: 100%;\n                z-index: -1;\n            }\n\n            .overlayer.active {\n                opacity: 1;\n                z-index: 1000;\n            }\n        </style>\n\n        <div class="overlayer"></div>\n        ',this.shadow.querySelector(".overlayer").addEventListener("click",(()=>{document.dispatchEvent(new CustomEvent("hideOverlayer"))}))}}customElements.define("overlayer-component",e)},966:()=>{class e extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.title=this.getAttribute("title")}static get observedAttributes(){return["title"]}connectedCallback(){document.addEventListener("newUrl",(e=>{this.setAttribute("title",e.detail.title)}))}attributeChangedCallback(e,t,n){this.render()}render(){this.shadow.innerHTML=`\n        <style>\n            h2 {   \n                color: hsl(0, 0%, 100%);\n                font-family: 'Roboto', sans-serif;\n                font-size: 2em;\n                font-weight: 600;\n                margin: 0;\n                text-decoration: none;\n                text-align:center;\n            }\n        </style>\n\n        <h2>${this.title}</h2>\n        `}}customElements.define("page-title-component",e)}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,n),l.exports}(()=>{"use strict";n(631);const e="http://127.0.0.1:8080";class t extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadow.innerHTML='\n        <style>\n\n            form{\n                width: 100%;\n            }\n\n            .form-element{\n                margin-bottom: 1em;\n                width: 100%;\n            }\n\n            .form-element-label{\n                margin-bottom: 0.5em;\n            }\n\n            .form-element-label label{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n                transition: color 0.5s;\n            }\n\n            .form-element-input{\n                width: 100%;\n            }\n\n            .form-element-input input{\n                background-color:hsl(226, 63%, 45%);\n                border: none;\n                border-bottom: 0.1em solid  hsl(0, 0%, 100%);\n                box-sizing: border-box;\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                padding: 0.2em;\n                width: 100%;\n            }\n\n            .form-submit{\n                background-color: transparent;\n                border-radius: 1em;\n                border: 0.2rem solid white;\n                color: white;\n                cursor: pointer;\n                float: right;\n                font-size: 1.2em;\n                font-weight: 600;\n                letter-spacing: 0;\n                line-height: 0px;\n                margin-top: 1em;\n                min-width: 20%;\n                padding: 1em 2em;\n                transition: 0.5s;\n                text-decoration: none;\n            }\n        </style>\n        <form class="form">\n            <div class="form-element">\n                <div class="form-element-label">\n                    <label for="email">Email</label>\n                </div>\n                <div class="form-element-input">\n                    <input type="email" name="email" id="email" required>\n                </div>\n            </div>\n            <div class="form-element">\n                <div class="form-element-label">\n                    <label for="password">Password</label>\n                </div>\n                <div class="form-element-input">\n                    <input type="password" name="password" id="password" required>\n                </div>\n            </div>\n            <button type="submit" class="form-submit">Enviar</button>\n        </form>\n        ';const e=this.shadow.querySelector("form");e.addEventListener("submit",(t=>{t.preventDefault(),this.submitForm(e)}))}async submitForm(t){let n=e+this.getAttribute("action"),a=new FormData(t),i=Object.fromEntries(a.entries());try{let e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(e.ok){let t=await e.json();sessionStorage.setItem("accessToken",t.accessToken),window.location.href=this.getAttribute("redirection")}else{let t=await e.json();console.log(t.message)}}catch(e){console.log(e)}}}customElements.define("login-form",t),n(966);class a extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.menuItems=[]}connectedCallback(){this.loadData().then((()=>this.render()))}async loadData(){let t=`${e}/api/admin/menus/display/${this.getAttribute("menu")}`;try{let e=await fetch(t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}),n=await e.json();this.menuItems=Object.values(n)}catch(e){console.log(e)}}render(){this.shadow.innerHTML='\n        <style>\n            #menu-button{\n                cursor:pointer;\n                height: 2em;\n                margin-left: auto;\n                position: relative;\n                width: 2em;\n                z-index: 1200;\n            }\n            #menu-button button{\n                background: none;\n                border: none;\n                color: inherit;\n                cursor:pointer;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n                outline: inherit;\n                padding: 0;\n            }\n\n            #menu-button button:before, #menu-button button:after,\n            #menu-button span:before, #menu-button span:after{\n                background-color: hsl(0, 0%, 100%);\n                border-radius: 15px;\n                content: "";\n                display: block;\n                height: 0.2em;\n                opacity: 1;\n                position: absolute;\n                transition: ease-in-out all 0.15s;\n                width: 100%\n            }\n\n            span:before, span:after{\n                top: 50%;\n                transform: translateY(-50%);\n            }\n\n            #menu-button button:before{\n                top: 0.5em;\n            }\n\n            #menu-button button:after{\n                bottom: 0.5em;\n            }\n\n            #menu-button.active button:before, #menu-button.active button:after{\n                display: none;\n            }\n\n            #menu-button.active span:before{\n                background-color: hsl(207, 85%, 69%);\n                transform: rotate(45deg);\n            }\n\n            #menu-button.active span:after{\n                background-color: hsl(207, 85%, 69%);\n                transform: rotate(-45deg)\n            }\n\n            #menu{\n                background-color: hsl(0, 0%, 100%);\n                height: 100vh;\n                left: 0;\n                position: fixed;\n                transition: opacity 0.4s;\n                top: 0;\n                opacity: 0;\n                padding: 5%;\n                width: 100%;\n                z-index: -1;\n            }\n\n            #menu.active{\n                opacity: 1;\n                z-index: 1000;\n            }\n\n            nav {\n                display: flex;\n                align-items: center;\n                justify-content: left;\n            }\n              \n            nav ul {\n                list-style: none;\n                margin: 0;\n                padding: 0;\n                display: flex;\n                flex-direction: column; \n            }\n              \n            nav ul li {\n                position: relative;\n                width: max-content;\n            }\n              \n            nav ul li a {\n                display: block;\n                font-family: \'Roboto\', sans-serif;\n                font-size: 1.5em;\n                padding: 0.5rem;\n                text-decoration: none;\n                color: hsl(207, 85%, 69%);\n            }\n\n            nav ul li a:hover {\n                color: hsl(19, 100%, 50%);\n            }\n\n            nav ul li .sub-menu {\n                display: none;\n            }\n            \n            nav ul li:hover .sub-menu {\n                display: block;\n            }\n              \n            nav ul li:hover > .sub-menu {\n                visibility: visible;\n                animation: slide-in 0.5s ease-in-out; /* animación de apertura */\n            }\n              \n            .sub-menu {\n                position: absolute;\n                top: 0;\n                left: 100%; \n                visibility: hidden;\n                animation: slide-out 0.5s ease-in-out;\n            }\n        </style>\n\n        <div id="menu-button">\n            <button>\n                <span></span>\n            </button>\n        </div>\n\n        <div id="menu">\n            <nav>\n                <ul>\n              \n                </ul>\n            </nav>\n        </div>';let e=this.shadow.querySelector("ul");this.menuItems.forEach((t=>{let n=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",t.customUrl),a.textContent=t.name,n.appendChild(a),this.createSubMenu(t,n),e.appendChild(n)})),this.shadow.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(a=>{a.preventDefault(),t.classList.toggle("active"),n.classList.toggle("active"),document.dispatchEvent(new CustomEvent("newUrl",{detail:{url:e.getAttribute("href"),title:e.textContent}}))}))}));let t=this.shadow.querySelector("#menu-button"),n=this.shadow.querySelector("#menu");t.addEventListener("click",(e=>{t.classList.toggle("active"),n.classList.toggle("active")}))}createSubMenu(e,t){if(e.children){let n=document.createElement("ul");n.classList.add("sub-menu"),t.append(n),Object.values(e.children).forEach((e=>{let t=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",e.customUrl),a.textContent=e.name,t.appendChild(a),n.appendChild(t),this.createSubMenu(e,t)})),t.appendChild(n)}}}customElements.define("menu-component",a);class i extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.images=[]}static get observedAttributes(){return["url"]}connectedCallback(){document.addEventListener("newUrl",(e=>{this.setAttribute("url",e.detail.url)})),document.addEventListener("showElement",(e=>{this.showElement(e.detail.element)})),document.addEventListener("refreshForm",(e=>{this.render()})),document.addEventListener("attachImageToForm",(e=>{this.attachImageToForm(e.detail.image)}))}async attributeChangedCallback(e,t,n){this.formStructure=await this.setFormStructure(),await this.render()}render=async()=>{this.shadow.innerHTML='\n        <style>\n\n            .tabs-container-menu{\n                background-color: hsl(100, 100%, 100%);\n                display: flex;\n                height: 2.5em;\n                justify-content: space-between;\n                width: 100%;\n            }\n            \n            .tabs-container-menu ul{\n                height: 2.5em;\n                display: flex;\n                margin: 0;\n                padding: 0;\n            }\n            \n            .tabs-container-menu li{\n                color: hsl(0, 0%, 50%);\n                cursor: pointer;\n                font-family: \'Roboto\' , sans-serif;\n                list-style: none;\n                font-weight: 600;\n                padding: 0.5em;\n                text-align: center;\n            }\n            \n            .tabs-container-menu li.active,\n            .tabs-container-menu li.active:hover{\n                background-color:hsl(207, 85%, 69%);\n                color: white;\n            }\n            \n            .tabs-container-buttons{\n                display: flex;\n                padding: 0 0.5em;\n            }\n\n            .tabs-container-buttons svg{\n                cursor: pointer;\n                height: 2.5rem;\n                width: 2.5rem;\n                fill: hsl(207, 85%, 69%);\n            }\n\n            .tabs-container-buttons svg:hover{\n                fill: hsl(19, 100%, 50%);\n            }\n\n            .errors-container{\n                background-color: hsl(0, 0%, 100%);\n                display: none;\n                flex-direction: column;\n                gap: 1em;\n                margin-top: 1em;\n                padding: 1em;\n            }\n\n            .errors-container.active{\n                display: flex;\n            }\n\n            .errors-container .error-container{\n                width: 100%;\n            }\n\n            .errors-container .error-container span{\n                color: hsl(0, 0%, 50%);\n                font-family: \'Roboto\' , sans-serif;\n                font-size: 1em;\n                font-weight: 600;\n            }\n            \n            .tab-panel{\n                display: none;\n            }\n            \n            .tab-panel.active{\n                display: block;\n                padding: 1em 0;\n            }\n            \n            .row {\n                display: flex;\n                justify-content: space-between;\n                gap: 2em;\n            }\n\n            .form-element{\n                margin-bottom: 1em;\n                width: 100%;\n            }\n            \n            .form-element-label{\n                display: flex;\n                justify-content: space-between;\n                margin-bottom: 1em;\n                width: 100%;\n            }\n            \n            .form-element-label label,\n            .form-element-label span{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n                transition: color 0.5s;\n            }\n\n            .form-element-label label.invalid::after{\n                content: \'*\';\n                color: hsl(0, 100%, 50%);\n                font-size: 1.5em;\n                margin-left: 0.2em;\n            }\n\n            .form-element-label,\n            .form-element-input{\n                width: 100%;\n            }\n\n            input[type="submit"]{\n                background: none;\n                color: inherit;\n                border: none;\n                padding: 0;\n                font: inherit;\n                cursor: pointer;\n                outline: inherit;\n            }\n            \n            .form-element-input input, \n            .form-element-input textarea,\n            .form-element-input select {\n                background-color:hsl(226deg 64% 66%);\n                border: none;\n                border-bottom: 0.1em solid  hsl(0, 0%, 100%);\n                box-sizing: border-box;\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                padding: 0.5em;\n                width: 100%;\n            }\n\n            .form-element-input input:focus,\n            .form-element-input textarea:focus,\n            .form-element-input select:focus{\n                outline: none;\n                border-bottom: 0.1em solid hsl(207, 85%, 69%);\n            }\n\n            .form-element-input input.invalid,\n            .form-element-input textarea.invalid{\n                border-bottom: 0.2em solid hsl(0, 100%, 50%);\n            }\n\n            .form-element-input textarea{\n                height: 10em;\n            }\n\n            .form-element-input .checkbox-container,\n            .form-element-input .radio-container{\n                display: flex;\n                align-items: center;\n                gap: 0.5em;\n            }\n\n            .form-element-input .checkbox-container input,\n            .form-element-input .radio-container input{\n                width: 1em;\n                height: 1em;\n            }\n\n            .form-element-input .checkbox-container label,\n            .form-element-input .radio-container label{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container{\n                display: flex;\n                align-items: center;\n                gap: 0.5em;\n            }\n\n            .form-element-input .range-container input{\n                width: 100%;\n            }\n\n            .form-element-input .range-container label{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container .range-value{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\' , sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container input[type="range"]{\n                -webkit-appearance: none;\n                width: 100%;\n                height: 0.5em;\n                border-radius: 0.5em;\n                background: hsl(0, 0%, 100%);\n                outline: none;\n                opacity: 0.7;\n                -webkit-transition: .2s;\n                transition: opacity .2s;\n            }\n\n            .form-element-input input[type="time"]::-webkit-calendar-picker-indicator,\n            .form-element-input input[type="date"]::-webkit-calendar-picker-indicator{\n                filter: invert(1);\n            }\n        </style>\n        \n        <form autocomplete="off">\n                                \n            <input autocomplete="false" name="hidden" type="text" style="display:none;">\n\n            <div class="tabs-container-menu">\n                <div class="tabs-container-items">\n                   <ul>\n                   </ul>\n                </div>\n\n                <div class="tabs-container-buttons">\n                    <div id="create-button"> \n                        <svg viewBox="0 0 24 24">\n                            <path d="M19.36,2.72L20.78,4.14L15.06,9.85C16.13,11.39 16.28,13.24 15.38,14.44L9.06,8.12C10.26,7.22 12.11,7.37 13.65,8.44L19.36,2.72M5.93,17.57C3.92,15.56 2.69,13.16 2.35,10.92L7.23,8.83L14.67,16.27L12.58,21.15C10.34,20.81 7.94,19.58 5.93,17.57Z" />\n                        </svg>\n                    </div>\n                    <div id="store-button"> \n                        <label>\n                            <input type="submit" value="">\n                            <svg viewBox="0 0 24 24">\n                                <path d="M0 0h24v24H0z" fill="none"/>\n                                <path class="crud__create-button-icon" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>\n                            </svg>\n                        </label> \n                    </div>\n                </div>\n            </div>\n\n            <div class="errors-container">\n\n            </div>\n\n            <div class="tabs-container-content"></div>\n        </form>\n        ';const e=this.shadow.querySelector("form"),t=this.shadow.querySelector(".tabs-container-items ul"),n=this.shadow.querySelector(".tabs-container-content");for(let a in this.formStructure.tabs){const i=document.createElement("li");i.classList.add("tab-item"),i.dataset.tab=a,i.innerHTML=this.formStructure.tabs[a].label,t.append(i);const l=document.createElement("div");l.dataset.tab=a,l.classList.add("tab-panel"),n.append(l);for(let t in this.formStructure.tabsContent[a].rows){const n=document.createElement("div");n.classList.add("row");for(let i in this.formStructure.tabsContent[a].rows[t].formElements){let l=this.formStructure.tabsContent[a].rows[t].formElements[i];const o=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div");if(o.append(s),o.append(r),o.classList.add("form-element"),s.classList.add("form-element-label"),r.classList.add("form-element-input"),l.label){const e=document.createElement("label");e.innerText=l.label,e.setAttribute("for",i),s.append(e)}if("input"===l.element)switch(l.type){case"hidden":{const t=document.createElement("input");t.type=l.type,t.name=i,t.value=l.value||"",e.append(t);continue}case"checkbox":case"radio":{const e=document.createElement("div");e.classList.add(`${l.type}-container`),l.options.forEach((t=>{const n=document.createElement("input"),a=document.createElement("label");a.innerText=t.label,n.id=i,n.type=l.type,n.name=i,n.value=t.value||"",n.checked=t.checked||!1,n.disabled=t.disabled||!1,e.append(a),e.append(n)})),r.append(e);break}case"range":{const e=document.createElement("div");e.classList.add("range-container");const t=document.createElement("input");t.id=i,t.type=l.type,t.name=i,t.min=l.min||"",t.max=l.max||"",t.step=l.step||"",t.value=l.value||"",e.append(t);const n=document.createElement("span");n.classList.add("range-value"),n.innerText=l.value,e.append(n),t.addEventListener("input",(()=>{n.innerText=t.value})),r.append(e);break}case"number":case"date":case"time":case"datetime-local":case"month":case"week":{const e=document.createElement("input");e.id=i,e.type=l.type,e.name=i,e.min=l.min||"",e.max=l.max||"",e.step=l.step||"",e.placeholder=l.placeholder||"",e.value=l.value||"",e.readOnly=l.readOnly||!1,e.dataset.validate=l.validate||"",r.append(e);break}case"file":{if(!this.shadow.querySelector("image-gallery-component")){const e=document.createElement("image-gallery-component");this.shadow.append(e)}const e=document.createElement("upload-image-button-component");e.id=i,e.setAttribute("name",i),e.setAttribute("languageAlias","es"),e.setAttribute("quantity",l.quantity),r.append(e);break}default:{const e=document.createElement("input");if(e.id=i,e.type=l.type,e.name=i,e.value=l.value||"",e.placeholder=l.placeholder||"",e.dataset.validate=l.validate||"",l.maxLength){e.maxLength=l.maxLength||"";const t=document.createElement("span");s.append(t),e.addEventListener("input",(()=>{e.value.length>0?t.textContent=e.value.length+" / "+e.maxLength:t.textContent=""}))}r.append(e);break}}if("textarea"===l.element){const e=document.createElement("textarea");if(e.id=i,e.name=i,e.disabled=l.disabled||!1,e.readOnly=l.readOnly||!1,e.value=l.value||"",e.cols=l.cols||"",e.rows=l.rows||"",e.wrap=l.wrap||"",e.placeholder=l.placeholder||"",e.dataset.validate=l.validate||"",l.maxLength){e.maxLength=l.maxLength||"";const t=document.createElement("span");s.append(t),e.addEventListener("input",(()=>{e.value.length>0?t.textContent=e.value.length+" / "+e.maxLength:t.textContent=""}))}r.append(e)}if("select"===l.element){const e=document.createElement("select");e.id=i,e.name=i,e.disabled=l.disabled||!1,e.required=l.required||!1,e.multiple=l.multiple||!1,l.options.forEach((t=>{const n=document.createElement("option");n.value=t.value,n.innerText=t.label,e.append(n)})),r.append(e)}n.append(o)}l.append(n)}}this.renderTabs(),this.renderSubmitForm(),this.renderCreateForm()};renderTabs=()=>{this.shadow.querySelector(".tab-item").classList.add("active"),this.shadow.querySelector(".tab-panel").classList.add("active");let e=this.shadow.querySelectorAll(".tab-item"),t=this.shadow.querySelectorAll(".tab-panel");e.forEach((e=>{e.addEventListener("click",(()=>{this.shadow.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),t.forEach((t=>{t.dataset.tab==e.dataset.tab&&t.classList.add("active")}))}))}))};renderSubmitForm=()=>{this.shadow.querySelector("#store-button").addEventListener("click",(async t=>{t.preventDefault();let n=this.shadow.querySelector("form");if(!this.validateForm(n.elements))return;let a=new FormData(n);this.shadow.querySelectorAll('input[type="checkbox"]').length>0&&this.shadow.querySelectorAll('input[type="checkbox"]').forEach((e=>{let t=[];this.shadow.querySelectorAll(`input[name="${e.name}"]:checked`).forEach((e=>{t.push(e.value)})),a.append(e.name,t)}));let i=Object.fromEntries(a.entries()),l=i.id?`${e}${this.getAttribute("url")}/${i.id}`:`${e}${this.getAttribute("url")}`,o=i.id?"PUT":"POST";delete i.id,this.images&&(i.images=this.images);let s=await fetch(l,{method:o,headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify(i)});if(200===s.status&&(document.dispatchEvent(new CustomEvent("message",{detail:{message:"Datos guardados correctamente",type:"success"}})),this.images=[],this.render(),document.dispatchEvent(new CustomEvent("refreshTable"))),500===s.status){let e=await s.json();e.errors&&e.errors.forEach((e=>{let t=document.createElement("div"),n=document.createElement("span");t.classList.add("error-container"),n.textContent=e.message,t.append(n),this.shadow.querySelector(".errors-container").append(t),this.shadow.querySelector(".errors-container").classList.add("active")})),document.dispatchEvent(new CustomEvent("message",{detail:{message:"Fallo al guardar los datos",type:"error"}}))}}))};renderCreateForm=()=>{this.shadow.querySelector("#create-button").addEventListener("click",(()=>{this.images=[],this.render()}))};validateForm=e=>{let t=!0,n={required:{regex:/\S/g,message:"El campo es obligatorio"},"only-letters":{regex:/^[a-zA-Z\s]+$/g,message:"El campo sólo puede contener letras"},"only-numbers":{regex:/\d/g,message:"El campo sólo puede contener números"},telephone:{regex:/^\d{9}$/g,message:"El campo debe contener 9 números"},email:{regex:/\w+@\w+\.\w+/g,message:"El campo debe contener un email válido"},password:{regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/g,message:"El campo debe contener al menos 8 caracteres, una mayúscula, una minúscula y un número"},date:{regex:/^\d{4}-\d{2}-\d{2}$/g,message:"El campo debe contener una fecha válida"},time:{regex:/^\d{2}:\d{2}$/g,message:"El campo debe contener una hora válida"},datetime:{regex:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}$/g,message:"El campo debe contener una fecha y hora válida"},dni:{regex:/^\d{8}[a-zA-Z]$/g,message:"El campo debe contener un DNI válido"},nif:{regex:/^[a-zA-Z]\d{7}[a-zA-Z]$/g,message:"El campo debe contener un NIF válido"},cif:{regex:/^[a-zA-Z]\d{7}[a-zA-Z0-9]$/g,message:"El campo debe contener un CIF válido"},"postal-code":{regex:/^\d{5}$/g,message:"El campo debe contener un código postal válido"},"credit-card":{regex:/^\d{16}$/g,message:"El campo debe contener una tarjeta de crédito válida"},iban:{regex:/^[a-zA-Z]{2}\d{22}$/g,message:"El campo debe contener un IBAN válido"},url:{regex:/^(http|https):\/\/\w+\.\w+/g,message:"El campo debe contener una URL válida"},ip:{regex:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/g,message:"El campo debe contener una IP válida"},mac:{regex:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/g,message:"El campo debe contener una MAC válida"},image:{regex:/\.(gif|jpg|jpeg|tiff|png)$/g,message:"El campo debe contener una imagen válida"},video:{regex:/\.(avi|mp4|mov|wmv|flv|mkv)$/g,message:"El campo debe contener un vídeo válido"},audio:{regex:/\.(mp3|wav|ogg|flac|aac)$/g,message:"El campo debe contener un audio válido"},pdf:{regex:/\.(pdf)$/g,message:"El campo debe contener un PDF válido"},doc:{regex:/\.(doc|docx)$/g,message:"El campo debe contener un documento válido"},xls:{regex:/\.(xls|xlsx)$/g,message:"El campo debe contener una hoja de cálculo válida"},ppt:{regex:/\.(ppt|pptx)$/g,message:"El campo debe contener una presentación válida"},zip:{regex:/\.(zip|rar|7z|tar|gz)$/g,message:"El campo debe contener un archivo comprimido válido"}};for(let a=0;a<e.length;a++)e[a].dataset.validate&&e[a].dataset.validate.split(",").forEach((i=>{if(null==e[a].value.match(n[i].regex)){if(!e[a].classList.contains("invalid")){e[a].classList.add("invalid"),e[a].closest(".form-element").querySelector("label").classList.add("invalid");let t=document.createElement("div"),l=document.createElement("span");t.classList.add("error-container"),l.textContent=`${e[a].closest(".form-element").querySelector("label").textContent}: ${n[i].message}`,t.append(l),this.shadow.querySelector(".errors-container").append(t)}t=!1}else e[a].classList.remove("invalid"),e[a].closest(".form-element").querySelector("label").classList.remove("invalid")}));return t||(this.shadow.querySelector(".errors-container").classList.add("active"),document.dispatchEvent(new CustomEvent("message",{detail:{message:"Los datos del formulario no son válidos",type:"error"}}))),t};showElement=e=>{this.render(),this.images=[],Object.entries(e).forEach((([e,t])=>{this.shadow.querySelector(`[name="${e}"]`)&&(this.shadow.querySelector(`[name="${e}"]`).value=t,"SELECT"==this.shadow.querySelector(`[name="${e}"]`).tagName&&this.shadow.querySelector(`[name="${e}"]`).querySelectorAll("option").forEach((e=>{e.value==t&&e.setAttribute("selected",!0)})),"radio"==this.shadow.querySelector(`[name="${e}"]`).type&&this.shadow.querySelector(`[name="${e}"]`).closest(".form-element").querySelectorAll('input[type="radio"]').forEach((e=>{e.value==t&&e.setAttribute("checked",!0)})),"checkbox"==this.shadow.querySelector(`[name="${e}"]`).type&&this.shadow.querySelectorAll(`[name="${e}"]`).forEach((e=>{e.value==t&&e.setAttribute("checked",!0)}))),"images"==e&&document.dispatchEvent(new CustomEvent("showThumbnails",{detail:{images:t}}))}))};attachImageToForm=async e=>{let t=this.images.findIndex((t=>t.filename===e.previousImage&&t.languageAlias===e.languageAlias&&t.name===e.name));-1==t?this.images.push(e):(e.delete&&e.create&&this.images.splice(t,1),e.update&&e.create?(this.images.splice(t,1),this.images[t]=e,delete e.update):(this.images.splice(t,1),this.images[t]=e)),console.log(this.images)};setFormStructure=async()=>{switch(this.getAttribute("url")){case"/api/admin/customers":return{tabs:{main:{label:"Principal"},images:{label:"Imágenes"}},tabsContent:{main:{rows:{row1:{formElements:{id:{element:"input",type:"hidden"},name:{label:"Nombre",element:"input",type:"text",validate:"only-letters"},surname:{label:"Apellidos",element:"input",type:"text"}}},row2:{formElements:{email:{label:"Email",element:"input",type:"email",validate:"email"},phone:{label:"Teléfono",element:"input",type:"text",validate:"only-numbers"}}},row3:{formElements:{mobile:{label:"Móvil",element:"input",type:"text",validate:"only-numbers"},address:{label:"Dirección",element:"input",type:"text"}}},row4:{formElements:{province:{label:"Provincia",element:"input",type:"text",validate:"only-letters"},township:{label:"Ciudad",element:"input",type:"text",validate:"only-letters"}}},row5:{formElements:{postalCode:{label:"Código Postal",element:"input",type:"text",validate:"postal-code"},startingServiceDate:{label:"Fecha de Inicio del Servicio",element:"input",type:"date",validate:"date"}}},row6:{formElements:{onService:{label:"En Servicio",element:"select",options:[{label:"Sí",value:"true"},{label:"No",value:"false"}]},identifyNumber:{label:"Número de Identificación",element:"input",type:"number"}}},row7:{formElements:{comment:{label:"Comentario",element:"textarea"}}},row8:{formElements:{id:{element:"input",type:"hidden"}}}}},images:{rows:{row1:{formElements:{flyer:{label:"Flyer",element:"input",type:"file"}}}}}}};case"/api/admin/emails":return{tabs:{main:{label:"Principal"},images:{label:"Imágenes"}},tabsContent:{main:{rows:{row1:{formElements:{id:{element:"input",type:"hidden"},subject:{label:"Asunto",element:"input",type:"text",validate:["required"]}}},row2:{formElements:{content:{label:"Contenido",element:"textarea",validate:["required"]}}}}},images:{rows:{row1:{formElements:{flyer:{label:"Flyer",element:"input",type:"file",quantity:"multiple"}}}}}}};case"/api/admin/ejemplo":return{tabs:{main:{label:"Principal"}},tabsContent:{main:{rows:{row1:{formElements:{id:{element:"input",type:"hidden"},name:{label:"Nombre",element:"input",maxLength:"10",type:"text",placeholder:"",required:!0,validate:"only-letters"},email:{label:"Email",element:"input",type:"email",placeholder:"",required:!0,validate:"email"}}},row2:{formElements:{password:{label:"Contraseña",element:"input",type:"password",placeholder:"",required:!0},repeatPassword:{label:"Repita la contraseña",element:"input",type:"password",placeholder:"",required:!0}}},row3:{formElements:{permissions:{label:"Permisos",element:"input",type:"checkbox",required:!0,options:[{label:"Crear",value:"create",checked:!0},{label:"Leer",value:"read"},{label:"Actualizar",value:"update"},{label:"Eliminar",value:"delete"}]},sex:{label:"Sexo",element:"input",type:"radio",required:!0,options:[{label:"Masculino",value:"M",checked:!0},{label:"Femenino",value:"F"}]}}},row4:{formElements:{color:{label:"Color",element:"input",type:"color",placeholder:""},role:{label:"Rol",element:"select",required:!0,options:[{label:"Administrador",value:"admin"},{label:"Usuario",value:"user"}]}}},row5:{formElements:{edad:{label:"Edad",element:"input",type:"number",placeholder:"",required:!0},telefono:{label:"Teléfono",element:"input",type:"tel",placeholder:"",required:!0},url:{label:"URL",element:"input",type:"url",placeholder:"",required:!0}}},row6:{formElements:{creationDate:{label:"Fecha de creación",element:"input",type:"date",placeholder:"",required:!0,validate:"date"},creationTime:{label:"Hora de creación",element:"input",type:"time",placeholder:"",required:!0}}},row7:{formElements:{reservationWeek:{label:"Semana de reserva",element:"input",type:"week",placeholder:"",required:!0},reservationMonth:{label:"Mes de reserva",element:"input",type:"month",placeholder:"",required:!0},reservationDateTime:{label:"Fecha y hora",element:"input",type:"datetime-local",placeholder:"",required:!0}}},row8:{formElements:{capital:{label:"Capital",element:"input",type:"range",min:0,max:100,step:1,value:50,placeholder:""}}},row9:{formElements:{pdf:{label:"Pdf",element:"input",type:"file",placeholder:"",required:!0},search:{label:"Buscar",element:"input",type:"search",placeholder:"",required:!0}}},row10:{formElements:{description:{label:"Descripción",element:"textarea",maxLength:100,placeholder:"",required:!0}}}}}}}}}}customElements.define("form-builder",i);class l extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.data=[],this.total,this.currentPage,this.lastPage}static get observedAttributes(){return["url"]}connectedCallback(){document.addEventListener("newUrl",(e=>{this.setAttribute("url",e.detail.url)})),document.addEventListener("refreshTable",(e=>{this.loadData().then((()=>this.render()))})),document.addEventListener("newFilter",(e=>{this.data=e.detail.rows,this.total=e.detail.total,this.currentPage=e.detail.currentPage,this.lastPage=e.detail.lastPage,this.render()}))}async attributeChangedCallback(e,t,n){this.tableStructure=await this.setTableStructure(),await this.loadData(),await this.render()}async loadData(){let t=e+this.getAttribute("url");try{let e=await fetch(t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}),n=await e.json();this.data=n.rows,this.total=n.meta.total,this.currentPage=n.meta.currentPage,this.lastPage=n.meta.pages}catch(e){console.log(e)}}async render(){this.shadow.innerHTML=`\n        <style>\n            .table {\n                width: 100%;\n            }\n\n            .table .table-row {\n                background-color: hsl(226deg 64% 66%);\n                box-shadow: 0 0 0.5em hsl(0deg 0% 0% / 0.5);\n                margin-bottom: 1em;\n            }\n\n            .table-row ul {\n                margin: 0;\n                padding: 0.5em; \n            }\n\n            .table-row ul li{\n                color: hsl(0, 0%, 100%);\n                font-family: 'Roboto', sans-serif;\n                list-style: none;\n            }\n\n            .table-row .table-data-header{\n                color: hsl(0, 0%, 100%);\n                font-family: 'Roboto', sans-serif;\n                font-weight: 700;\n                margin-right: 0.5em;\n            }\n\n            .table-row .table-data-header::after {\n                content: ":";\n                margin-left: 0.3em;\n            }\n\n            .table-row .table-buttons{\n                background-color: hsl(207, 85%, 69%);\n                display: flex;\n                justify-content: right;\n                gap: 0.5rem;\n            }\n\n            .table-row .table-buttons svg {\n                cursor: pointer;\n                height: 2em;\n                width: 2em;\n            }\n\n            .table-row .table-buttons svg path {\n                fill: hsl(0, 0%, 100%);\n            }\n\n            .table-row .table-buttons svg:hover path {\n                fill: hsl(19, 100%, 50%);\n            }\n\n            .table-pagination {\n                margin-top: 1em;\n            }\n           \n            .table-pagination .table-pagination-info{\n                color: hsl(0, 0%, 100%);\n                display: flex;\n                font-family: 'Roboto', sans-serif;\n                justify-content: space-between;\n            }\n\n            .table-pagination .table-pagination-buttons p{\n                color: hsl(0, 0%, 100%);\n                font-family: 'Roboto', sans-serif;\n                margin: 1rem 0;\n            }\n\n            .table-pagination-info p{\n                margin: 0;\n            }\n        \n            .table-pagination .table-pagination-button{\n                cursor: pointer;\n                margin-right: 1em;\n            }\n        \n            .table-pagination .table-pagination-button:hover{\n                color: hsl(19, 100%, 50%);\n            }\n        \n            .table-pagination .table-pagination-button.inactive{\n                color: hsl(0, 0%, 69%);\n            }\n        </style>\n\n        <div class="table">\n        </div>\n        \n        <div class="table-pagination">\n            <div class="table-pagination-info">\n                <div class="table-pagination-total"><p><span id="total-page">${this.total}</span> registros</p></div>\n                <div class="table-pagination-pages"><p>Página <span id="current-page">${this.currentPage}</span> de <span id="last-page">${this.lastPage}</span></p></div>\n            </div>\n            <div class="table-pagination-buttons">\n                <p>\n                    <span class="table-pagination-button" id="firstPageUrl">Primera</span>\n                    <span class="table-pagination-button" id="previousPageUrl">Anterior</span>\n                    <span class="table-pagination-button" id="nextPageUrl">Siguiente</span>\n                    <span class="table-pagination-button" id="lastPageUrl">Última</span>\n                </p>\n            </div>\n        </div>`,await this.getTableData(),await this.renderTableButtons(),await this.renderPaginationButtons()}async getTableData(){let e=this.shadow.querySelector(".table");this.data.forEach((t=>{let n=document.createElement("div");n.classList.add("table-row");let a=document.createElement("div");a.classList.add("table-buttons"),n.appendChild(a);let i=document.createElement("ul");i.classList.add("table-row-data"),n.appendChild(i),Object.keys(this.tableStructure.headers).forEach((e=>{let n=document.createElement("li"),a=document.createElement("span");a.classList.add("table-data-header"),a.innerHTML=this.tableStructure.headers[e].label,n.appendChild(a),t[e]&&(n.textContent=t[e]),i.appendChild(n)})),Object.keys(this.tableStructure.buttons).forEach((e=>{let n=document.createElement("div");n.classList.add("table-button"),"edit"==e&&(n.classList.add("edit-button"),n.dataset.id=t.id,n.innerHTML='\n                        <svg viewBox="0 0 24 24">\n                            <path fill="currentColor" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />\n                        </svg>'),"remove"==e&&(n.classList.add("remove-button"),n.dataset.id=t.id,n.innerHTML='\n                        <svg viewBox="0 0 24 24">\n                            <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />\n                        </svg>'),a.appendChild(n)})),e.append(n)}))}async renderTableButtons(){let t=this.shadow.querySelectorAll(".edit-button"),n=this.shadow.querySelectorAll(".remove-button");t.forEach((t=>{t.addEventListener("click",(()=>{let n=e+this.getAttribute("url")+"/"+t.dataset.id;fetch(n,{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}).then((e=>e.json())).then((e=>{document.dispatchEvent(new CustomEvent("showElement",{detail:{element:e}}))})).catch((e=>{console.log(e)}))}))})),n.forEach((t=>{t.addEventListener("click",(()=>{let n=e+this.getAttribute("url")+"/"+t.dataset.id;document.dispatchEvent(new CustomEvent("showOverlayer")),document.dispatchEvent(new CustomEvent("showDeleteModal",{detail:{url:n}}))}))}))}async renderPaginationButtons(){this.shadow.querySelectorAll(".table-pagination-button").forEach((e=>{e.addEventListener("click",(()=>{let t;switch(e.id){case"firstPageUrl":t=1;break;case"previousPageUrl":if(1==this.currentPage)return;t=parseInt(this.currentPage)-1;break;case"nextPageUrl":if(this.currentPage==this.lastPage)return;t=parseInt(this.currentPage)+1;break;case"lastPageUrl":t=this.lastPage}this.setAttribute("url",`${this.url}?page=${t}`),this.setAttribute("currentPage",t)}))}))}setTableStructure(){switch(this.getAttribute("url")){case"/api/admin/customers":return{headers:{email:{label:"Email"},name:{label:"Nombre"},surname:{label:"Apellidos"}},buttons:{edit:!0,remove:!0}};case"/api/admin/emails":return{headers:{subject:{label:"Asunto"}},buttons:{edit:!0,remove:!0}}}}}customElements.define("table-component",l);class o extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.formStructure=this.setFormStructure()}static get observedAttributes(){return["url"]}connectedCallback(){document.addEventListener("newUrl",(e=>{this.setAttribute("url",e.detail.url)}))}async attributeChangedCallback(e,t,n){this.formStructure=await this.setFormStructure(),await this.render()}render(){this.shadow.innerHTML='\n        <style>\n\n            .table-filter{\n                height: max-content;\n                margin-bottom: 2em;\n                position: relative;\n                width: 100%;\n            }\n\n            .table-filter.active .table-filter-container{\n                max-height: 70vh;\n            }\n\n            .table-filter-container{\n                max-height: 0;\n                margin: 0 auto;\n                overflow: hidden;\n                transition: max-height 0.5s;\n                width: 100%;\n            }\n\n            .table-filter-container form{\n                background-color: transparent;\n            }\n\n            .table-filter-buttons{\n                width: 100%;\n            }\n\n            .table-filter-buttons .table-filter-button{\n                cursor: pointer;\n                max-height: 0;\n                overflow: hidden;\n                transition: max-height 0.5s;\n                width: 100%;\n                text-align: center;\n            }\n\n            .table-filter-buttons .table-filter-button:hover{\n                svg path{\n                    fill: hsl(19, 100%, 50%);\n                }\n            }\n\n            .table-filter-buttons .table-filter-button.active{\n                max-height: 2.5rem;\n            }\n\n            .table-filter-buttons .table-filter-button.open-filter{\n                background-color: hsl(0, 0%, 100%);\n            }\n\n            .table-filter-buttons .table-filter-button.apply-filter{\n                background-color: hsl(160, 51%, 33%);\n            }\n\n            .table-filter-buttons .table-filter-button svg{\n                height: 1.5em;\n                padding: 0.5em;\n                width: 1.5em;\n            }\n\n            .table-filter-buttons .table-filter-button.open-filter svg path{\n                fill: hsl(207, 85%, 69%);\n            }\n\n            .table-filter-buttons .table-filter-button.open-filter svg:hover path{\n                fill: hsl(19, 100%, 50%);\n            }\n\n            .table-filter-buttons .table-filter-button.apply-filter svg path{\n                fill: hsl(0, 0%, 100%);\n            }\n\n            .table-filter-buttons .table-filter-button.apply-filter svg:hover path{\n                fill: hsl(19, 100%, 50%);\n            }\n\n            .tabs-container-menu{\n                background-color: hsl(100, 100%, 100%);\n                display: flex;\n                height: 2.5em;\n                justify-content: space-between;\n                width: 100%;\n            }\n            \n            .tabs-container-menu ul{\n                height: 2.5em;\n                display: flex;\n                margin: 0;\n                padding: 0;\n            }\n            \n            .tabs-container-menu li{\n                color: hsl(0, 0%, 50%);\n                cursor: pointer;\n                font-family: \'Roboto\' , sans-serif;\n                list-style: none;\n                font-weight: 600;\n                padding: 0.5em;\n                text-align: center;\n            }\n            \n            .tabs-container-menu li.active,\n            .tabs-container-menu li.active:hover{\n                background-color:hsl(207, 85%, 69%);\n                color: white;\n            }\n            \n            .tabs-container-buttons{\n                display: flex;\n                padding: 0 0.5em;\n            }\n\n            .tabs-container-buttons svg{\n                cursor: pointer;\n                height: 2.5rem;\n                width: 2.5rem;\n                fill: hsl(207, 85%, 69%);\n            }\n\n            .tabs-container-buttons svg:hover{\n                fill: hsl(19, 100%, 50%);\n            }\n\n            .errors-container{\n                background-color: hsl(0, 0%, 100%);\n                display: none;\n                flex-direction: column;\n                gap: 1em;\n                margin-top: 1em;\n                padding: 1em;\n            }\n\n            .errors-container.active{\n                display: flex;\n            }\n\n            .errors-container .error-container{\n                width: 100%;\n            }\n\n            .errors-container .error-container span{\n                color: hsl(0, 0%, 50%);\n                font-family: \'Ubuntu\';\n                font-size: 0.8em;\n                font-weight: 600;\n            }\n            \n            .tab-panel{\n                display: none;\n            }\n            \n            .tab-panel.active{\n                display: block;\n                padding: 0.5em 0;\n            }\n            \n            .row {\n                display: flex;\n                justify-content: space-between;\n                gap: 2em;\n            }\n\n            .form-element{\n                margin: 1em 0;\n                width: 100%;\n            }\n            \n            .form-element-label{\n                display: flex;\n                justify-content: space-between;\n                margin-bottom: 1em;\n                width: 100%;\n            }\n            \n            .form-element-label label,\n            .form-element-label span{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\', sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n                transition: color 0.5s;\n            }\n\n            .form-element-label label.invalid{\n                color: hsl(351deg 88% 64%);\n            }\n\n            .form-element-label,\n            .form-element-input{\n                width: 100%;\n            }\n\n            input[type="submit"]{\n                background: none;\n                color: inherit;\n                border: none;\n                padding: 0;\n                font: inherit;\n                cursor: pointer;\n                outline: inherit;\n            }\n            \n            .form-element-input input, \n            .form-element-input textarea,\n            .form-element-input select {\n                background-color:hsl(226deg 64% 66%);\n                border: none;\n                border-bottom: 0.1em solid  hsl(0, 0%, 100%);\n                box-sizing: border-box;\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\', sans-serif;\n                font-weight: 600;\n                padding: 0.5em;\n                width: 100%;\n            }\n\n            .form-element-input input:focus,\n            .form-element-input textarea:focus,\n            .form-element-input select:focus{\n                outline: none;\n                border-bottom: 0.1em solid hsl(207, 85%, 69%);\n            }\n\n            .form-element-input input.invalid,\n            .form-element-input textarea.invalid{\n                border-bottom: 0.1em solid hsl(0, 100%, 50%);\n            }\n\n            .form-element-input textarea{\n                height: 10em;\n            }\n\n            .form-element-input .checkbox-container,\n            .form-element-input .radio-container{\n                display: flex;\n                align-items: center;\n                gap: 0.5em;\n            }\n\n            .form-element-input .checkbox-container input,\n            .form-element-input .radio-container input{\n                width: 1em;\n                height: 1em;\n            }\n\n            .form-element-input .checkbox-container label,\n            .form-element-input .radio-container label{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\', sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container{\n                display: flex;\n                align-items: center;\n                gap: 0.5em;\n            }\n\n            .form-element-input .range-container input{\n                width: 100%;\n            }\n\n            .form-element-input .range-container label{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\', sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container .range-value{\n                color: hsl(0, 0%, 100%);\n                font-family: \'Roboto\', sans-serif;\n                font-weight: 600;\n                font-size: 1em;\n            }\n\n            .form-element-input .range-container input[type="range"]{\n                -webkit-appearance: none;\n                width: 100%;\n                height: 0.5em;\n                border-radius: 0.5em;\n                background: hsl(0, 0%, 100%);\n                outline: none;\n                opacity: 0.7;\n                -webkit-transition: .2s;\n                transition: opacity .2s;\n            }\n\n            .form-element-input input[type="time"]::-webkit-calendar-picker-indicator,\n            .form-element-input input[type="date"]::-webkit-calendar-picker-indicator{\n                filter: invert(1);\n            }\n        </style>\n        \n        <div class="table-filter" id="table-filter">\n            <div class="table-filter-container">\n                <form autocomplete="off">\n                                        \n                    <input autocomplete="false" name="hidden" type="text" style="display:none;">\n\n                    <div class="tabs-container-menu">\n                        <div class="tabs-container-items">\n                            <ul></ul>\n                        </div>\n                    </div>\n\n                    <div class="tabs-container-content"></div>\n                </form>\n            </div>\n            <div class="table-filter-buttons">\n                <div class="table-filter-button open-filter active" id="open-filter">\n                    <svg viewBox="0 0 24 24">\n                        <path d="M11 11L16.76 3.62A1 1 0 0 0 16.59 2.22A1 1 0 0 0 16 2H2A1 1 0 0 0 1.38 2.22A1 1 0 0 0 1.21 3.62L7 11V16.87A1 1 0 0 0 7.29 17.7L9.29 19.7A1 1 0 0 0 10.7 19.7A1 1 0 0 0 11 18.87V11M13 16L18 21L23 16Z" />\n                    </svg>\n                </div>\n                <div class="table-filter-button apply-filter" id="apply-filter">\n                    <svg viewBox="0 0 24 24">\n                        <path d="M12 12V19.88C12.04 20.18 11.94 20.5 11.71 20.71C11.32 21.1 10.69 21.1 10.3 20.71L8.29 18.7C8.06 18.47 7.96 18.16 8 17.87V12H7.97L2.21 4.62C1.87 4.19 1.95 3.56 2.38 3.22C2.57 3.08 2.78 3 3 3H17C17.22 3 17.43 3.08 17.62 3.22C18.05 3.56 18.13 4.19 17.79 4.62L12.03 12H12M15 17H18V14H20V17H23V19H20V22H18V19H15V17Z" />\n                    </svg>\n                </div>\n            </div>\n        </div>';const e=this.shadow.querySelector(".tabs-container-items ul"),t=this.shadow.querySelector(".tabs-container-content");let n=0;for(let a in this.formStructure.tabs){const i=document.createElement("li");i.classList.add("tab-item"),0===n&&i.classList.add("active"),i.dataset.tab=a,i.innerHTML=this.formStructure.tabs[a].label,e.appendChild(i);const l=document.createElement("div");t.appendChild(l);for(let e in this.formStructure.tabsContent[a].rows){l.dataset.tab=a,l.classList.add("tab-panel"),0===n&&l.classList.add("active");const t=document.createElement("div");t.classList.add("row");for(let n in this.formStructure.tabsContent[a].rows[e].formElements){let i=this.formStructure.tabsContent[a].rows[e].formElements[n];const l=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");if(l.appendChild(o),l.appendChild(s),l.classList.add("form-element"),o.classList.add("form-element-label"),s.classList.add("form-element-input"),i.label){const e=document.createElement("label");e.innerText=i.label,e.setAttribute("for",`${i.label}`),o.appendChild(e)}if("input"===i.element)switch(i.type){case"checkbox":case"radio":{const e=document.createElement("div");e.classList.add(`${i.type}-container`),i.options.forEach((t=>{const a=document.createElement("input"),l=document.createElement("label");l.innerText=t.label,a.type=i.type,a.name=n,a.value=t.value||"",a.required=i.required||!1,a.checked=t.checked||!1,a.disabled=t.disabled||!1,e.appendChild(l),e.appendChild(a)})),s.appendChild(e);break}case"range":{const e=document.createElement("div");e.classList.add("range-container");const t=document.createElement("input");t.type=i.type,t.name=n,t.min=i.min||"",t.max=i.max||"",t.step=i.step||"",t.value=i.value||"",e.appendChild(t);const a=document.createElement("span");a.classList.add("range-value"),a.innerText=i.value,e.appendChild(a),t.addEventListener("input",(()=>{a.innerText=t.value})),s.appendChild(e);break}case"number":case"date":case"time":case"datetime-local":case"month":case"week":{const e=document.createElement("input");e.type=i.type,e.name=n,e.min=i.min||"",e.max=i.max||"",e.step=i.step||"",e.placeholder=i.placeholder||"",e.value=i.value||"",e.readOnly=i.readOnly||!1,e.dataset.validate=i.validate||"",s.appendChild(e);break}case"file":{const e=document.createElement("input");e.type=i.type,e.name=n,e.accept=i.accept||"",e.multiple=i.multiple||!1,e.required=i.required||!1,e.dataset.validate=i.validate||"",s.appendChild(e);break}default:{const e=document.createElement("input");if(e.type=i.type,e.name=n,e.value=i.value||"",e.placeholder=i.placeholder||"",e.required=i.required||!1,e.dataset.validate=i.validate||"",i.maxLength){e.maxLength=i.maxLength||"";const t=document.createElement("span");o.appendChild(t),e.addEventListener("input",(()=>{e.value.length>0?t.textContent=e.value.length+" / "+e.maxLength:t.textContent=""}))}s.appendChild(e);break}}if("textarea"===i.element){const e=document.createElement("textarea");if(e.name=n,e.disabled=i.disabled||!1,e.required=i.required||!1,e.readOnly=i.readOnly||!1,e.value=i.value||"",e.cols=i.cols||"",e.rows=i.rows||"",e.wrap=i.wrap||"",e.placeholder=i.placeholder||"",i.maxLength){e.maxLength=i.maxLength||"";const t=document.createElement("span");o.appendChild(t),e.addEventListener("input",(()=>{e.value.length>0?t.textContent=e.value.length+" / "+e.maxLength:t.textContent=""}))}s.appendChild(e)}if("select"===i.element){const e=document.createElement("select");e.name=n,e.disabled=i.disabled||!1,e.required=i.required||!1,e.multiple=i.multiple||!1,i.options.forEach((t=>{const n=document.createElement("option");n.value=t.value,n.innerText=t.label,e.appendChild(n)})),s.appendChild(e)}t.appendChild(l)}l.appendChild(t)}n++}this.renderTabs(),this.renderButtons()}renderTabs=()=>{let e=this.shadow.querySelectorAll(".tab-item"),t=this.shadow.querySelectorAll(".tab-panel");e.forEach((e=>{e.addEventListener("click",(()=>{this.shadow.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),t.forEach((t=>{t.dataset.tab==e.dataset.tab&&t.classList.add("active")}))}))}))};renderButtons(){let t=this.shadow.getElementById("open-filter"),n=this.shadow.getElementById("apply-filter"),a=this.shadow.getElementById("table-filter");t.addEventListener("click",(()=>{t.classList.remove("active"),n.classList.add("active"),a.classList.add("active")})),n.addEventListener("click",(async()=>{let i,l=e+this.getAttribute("url"),o=this.shadow.querySelector("form"),s=new FormData(o),r=Object.fromEntries(s.entries());if(r.prompt)i=await fetch(`${l}/openai-filter`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify(r)});else{let e=new URLSearchParams(s).toString();i=await fetch(`${l}?${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("accessToken")}})}200===i.status&&(this.data=await i.json(),t.classList.add("active"),n.classList.remove("active"),a.classList.remove("active"),o.reset(),document.dispatchEvent(new CustomEvent("newFilter",{detail:{rows:this.data.rows,total:this.data.meta.total,currentPage:this.data.meta.currentPage,lastPage:this.data.meta.pages}}))),500===i.status&&console.log("Error en el servidor")}))}setFormStructure(){switch(this.getAttribute("url")){case"/api/admin/customers":return{tabs:{filter:{label:"Filtros de búsqueda"},openAI:{label:"OpenAI"}},tabsContent:{filter:{rows:{row1:{formElements:{email:{label:"Email",element:"input",type:"email",placeholder:"",required:!0,validate:"email"},mobile:{label:"Móvil",element:"input",type:"text",validate:"only-numbers"}}}}},openAI:{rows:{row1:{formElements:{prompt:{label:"¿Qué datos quieres ver?",element:"textarea"}}}}}}};case"/api/admin/emails":return{tabs:{filter:{label:"Filtros de búsqueda"}},tabsContent:{filter:{rows:{row1:{formElements:{subject:{label:"Asunto",element:"input",type:"text",placeholder:"",required:!0}}}}}}}}}}customElements.define("table-filter",o),n(384);class s extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.name=this.getAttribute("name"),this.languageAlias=this.getAttribute("languageAlias")||"es",this.quantity=this.getAttribute("quantity")||"single",this.createThumbnailHandler=e=>{e.detail.image.name===this.getAttribute("name")&&e.detail.image.languageAlias===this.getAttribute("languageAlias")&&this.createThumbnail(e.detail.image)},this.updateThumbnailHandler=e=>{e.detail.image.name===this.getAttribute("name")&&e.detail.image.languageAlias===this.getAttribute("languageAlias")&&this.updateThumbnail(e.detail.image,e.detail.previousImage)},this.showThumbnailsHandler=e=>{this.showThumbnails(e.detail.images)},this.deleteThumbnailsHandler=e=>{this.deleteThumbnails()},document.addEventListener("showThumbnails",this.showThumbnailsHandler),document.addEventListener("createThumbnail",this.createThumbnailHandler),document.addEventListener("updateThumbnail",this.updateThumbnailHandler),document.addEventListener("deleteThumbnails",this.deleteThumbnailsHandler)}connectedCallback(){this.render()}disconnectedCallback(){document.removeEventListener("showThumbnails",this.showThumbnailsHandler),document.removeEventListener("createThumbnail",this.createThumbnailHandler),document.addEventListener("updateThumbnail",this.updateThumbnailHandler),document.addEventListener("deleteThumbnails",this.deleteThumbnailsHandler)}render(){this.shadow.innerHTML='\n        <style>\n            .square-button {\n                width: 135px;\n                height: 135px;\n                border: none;\n                background-color: hsl(207, 85%, 69%);\n                color: white;\n                text-align: center;\n                display: inline-block;\n                font-size: 16px;\n                cursor: pointer;\n            }\n\n            .square-button:hover {\n                border: 0.2rem solid hsl(19, 100%, 50%);\n                cursor: pointer;\n            }\n          \n            .icon {\n                fill: white;\n                width: 24px;\n                height: 24px;\n            }\n\n            .upload-image-container {\n                display: flex;\n                gap: 1rem;\n                flex-wrap: wrap;\n                justify-content: left;\n            }\n\n            .upload-image{\n                background-color: hsl(100, 100%, 100%);\n                cursor: pointer;\n                height: 135px;\n                position: relative;\n                width: 135px;\n            }\n\n            .upload-image-overlay {\n                background-color: hsla(0, 0%, 0%, 0.5);\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                opacity: 0;\n                transition: opacity 0.3s ease;\n                z-index: 2000;\n            }\n\n            .upload-image:hover .upload-image-overlay {\n                opacity: 1;\n            }\n\n            .delete-button {\n                position: absolute;\n                top: 0.2rem;\n                right: 0.2rem;\n                background-color: hsl(0, 100%, 50%);\n                color: white;\n                border: none;\n                border-radius: 50%;\n                width: 20px;\n                height: 20px;\n                font-size: 12px;\n                cursor: pointer;\n                opacity: 0;\n                transition: opacity 0.3s ease;\n                z-index: 2001;\n            }\n\n            .upload-image:hover .delete-button {\n                opacity: 1;\n            }\n\n            .delete-button:hover {\n                background-color: hsl(0, 100%, 30%);\n            }\n        </style>\n\n        <div class="upload-image-container">\n            <button class="square-button">\n                <svg class="icon" viewBox="0 0 24 24">\n                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n                </svg>\n            </button>\n        </div>\n        ',this.shadow.querySelector(".square-button").addEventListener("click",(()=>{let e={name:this.getAttribute("name"),languageAlias:this.languageAlias,filename:"",title:"",alt:""};document.dispatchEvent(new CustomEvent("openGallery",{detail:{image:e}}))}))}async showThumbnails(e){this.shadow.querySelectorAll(".upload-image").forEach((e=>{e.remove()})),e.forEach((e=>{e.show=!0,document.dispatchEvent(new CustomEvent("createThumbnail",{detail:{image:e}}))}))}async createThumbnail(t){if(this.shadow.querySelector(`.upload-image[data-filename="${t.filename}"]`))return;"single"===this.getAttribute("quantity")&&(this.shadow.querySelector(".upload-image-container").innerHTML="");const n=document.createElement("div");n.classList.add("upload-image"),n.dataset.filename=t.filename;const a=document.createElement("div");a.classList.add("upload-image-overlay");let i=document.createElement("img");i.src=`${e}/api/admin/image-gallery/${t.filename}`;let l=document.createElement("button");l.classList.add("delete-button"),l.innerHTML="X",n.appendChild(l),n.appendChild(a),n.appendChild(i),this.shadow.querySelector(".upload-image-container").appendChild(n),t.show||(t.create=!0),document.dispatchEvent(new CustomEvent("attachImageToForm",{detail:{image:t}})),a.addEventListener("click",(()=>{t.filename=n.dataset.filename,document.dispatchEvent(new CustomEvent("openGallery",{detail:{image:t}}))})),l.addEventListener("click",(async()=>{n.remove(),t.previousImage=n.dataset.filename,t.delete=!0,document.dispatchEvent(new CustomEvent("attachImageToForm",{detail:{image:t}}))}))}async updateThumbnail(t,n){if(!this.shadow.querySelector(`.upload-image[data-filename="${t.filename}"]`)&&this.shadow.querySelector(`.upload-image[data-filename="${n}"]`)){let a=this.shadow.querySelector(`.upload-image[data-filename="${n}"]`);a.querySelector("img").src=`${e}/api/admin/image-gallery/${t.filename}`,a.dataset.filename=t.filename,t.previousImage=n,t.update=!0,document.dispatchEvent(new CustomEvent("attachImageToForm",{detail:{image:t}}))}}async deleteThumbnails(){this.shadow.querySelectorAll(".upload-image").forEach((e=>{e.remove()}))}}customElements.define("upload-image-button-component",s);class r extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.name="",this.languageAlias="",this.openGalleryHandler=e=>{this.openGallery(e.detail.image)},this.closeGalleryHandler=e=>{this.shadow.querySelector(".modal").classList.contains("active")&&this.shadow.querySelector(".modal").classList.remove("active")},document.addEventListener("openGallery",this.openGalleryHandler),document.addEventListener("hideOverlayer",this.closeGalleryHandler)}connectedCallback(){this.render()}disconnectedCallback(){document.removeEventListener("openGallery",this.openGalleryHandler),document.removeEventListener("hideOverlayer",this.closeGalleryHandler)}async render(){this.shadow.innerHTML='\n        <style>\n            .modal {\n                bottom: 30px;\n                left: 30px;\n                position: fixed;\n                opacity: 0;\n                top: 30px;\n                right: 30px;\n                z-index: -1;\n                visibility: hidden;\n            }\n\n            .modal.active {\n                opacity: 1;\n                visibility: visible;\n                z-index: 50000;\n            }\n\n            .modal-content {\n                background-color: white;\n                border: 1px solid #888;\n                border-radius: 5px;\n                box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n                height: 100%;\n                position: relative;\n                width: 100%;\n            }\n\n            .modal-header {\n                align-items: center;\n                display: flex;\n                height: 5%;\n                justify-content: space-between;\n                padding: 1%;\n                width: 98%;\n            }\n\n            .modal-header h2 {\n                font-family: \'Roboto\', sans-serif;\n                margin: 0;\n            }\n\n            .modal-header .close {\n                color: #aaa;\n                float: right;\n                font-size: 28px;\n                font-weight: bold;\n            }\n\n            .modal-header .close:hover,\n            .modal-header .close:focus {\n                color: black;\n                text-decoration: none;\n                cursor: pointer;\n            }\n\n            .modal-body {\n                display: flex;\n                flex-direction: column;\n                height: 85%;\n            }\n\n            .tabs-container-menu {\n                display: flex;\n                flex-direction: column;\n            }\n\n            .tabs-container-menu .tabs-container-items {\n                align-items: center;\n                display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n                padding: 0 1%;\n            }\n\n            .tabs-container-menu .tabs-container-items ul {\n                display: flex;\n                flex-direction: row;\n                list-style-type: none;\n                margin: 0;\n                padding: 0;\n            }\n\n            .tabs-container-menu .tabs-container-items ul li {\n                cursor: pointer;\n                font-family: \'Roboto\', sans-serif;\n                padding: 0.5rem 1rem;\n            }\n\n            .tabs-container-menu .tabs-container-items ul li:hover {\n                color: #555;\n            }\n\n            .tabs-container-menu .tabs-container-items ul li.active {\n                background-color: hsl(207, 85%, 69%);\n                color: white;\n            }\n\n            .tabs-container-content {\n                display: flex;\n                flex-direction: column;\n                height: 95%;\n            }\n\n            .tabs-container-content .tab {\n                display: none;\n                height: 100%;\n            }\n\n            .tabs-container-content .tab.active {\n                display: block;\n            }\n\n            .tabs-container-content .tab.active#gallery-content {\n                border-bottom: 1px solid #dcdcde;\n                border-top: 1px solid #dcdcde;\n                display: flex;\n            }\n\n            .image-gallery {\n                align-content: flex-start;\n                display: flex;\n                flex-direction: row;\n                flex-wrap: wrap;\n                height: 96%;\n                overflow: scroll;\n                overflow-y: auto;\n                overflow-x: hidden;\n                padding: 1%;\n                width: 80%;\n            }\n\n            .image-gallery-loader {\n                background-color: #f1f1f1;\n                height: 100%;\n                overflow: scroll;\n                overflow-y: auto;\n                overflow-x: hidden;\n                width: 20%;\n            }\n\n            .image-gallery .image {\n                border: 1px solid #ccc;\n                border-radius: 5px;\n                box-sizing: border-box;\n                cursor: pointer;\n                height: 135px;\n                margin: 5px;\n                overflow: hidden;\n                padding: 5px;\n                position: relative;\n                width: 135px;\n            }\n\n            .image-gallery .image:hover {\n                border: 1px solid #aaa;\n            }\n\n            .image-gallery .image img {\n                height: 100%;\n                width: 100%;\n            }\n\n            .image-gallery .image.selected {\n                border: 0.2rem solid #4CAF50;\n            }\n\n            .image-gallery-loader-form{\n                margin: 1rem;\n            }\n\n            .image-gallery-loader-form label {\n                font-family: \'Roboto\', sans-serif;\n                margin: 0.5rem 5%;\n                width: 90%;\n            }   \n\n            .image-gallery-loader-form input {\n                border: 1px solid #ccc;\n                box-sizing: border-box;\n                margin: 5%;\n                padding: 0.2rem;\n                position: relative;\n                width: 90%;\n            }\n\n            .tabs-container-content .tab.active#upload-content {\n                border-bottom: 1px solid #dcdcde;\n                border-top: 1px solid #dcdcde;\n            }\n\n            .upload-image {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .upload-image input[type="file"] {\n                display: none;\n            }\n\n            .upload-image label {\n                background-color: hsl(207, 85%, 69%);\n                border: none;\n                border-radius: 5px;\n                color: white;\n                cursor: pointer;\n                font-family: \'Roboto\', sans-serif;\n                font-size: 16px;\n                padding: 12px 24px;\n                text-align: center;\n                text-decoration: none;\n                display: inline-block;\n                margin: 4px 2px;\n                transition-duration: 0.4s;\n            }\n\n            .upload-image label:hover {\n                background-color: #45a049;\n            }\n\n            .modal-footer {\n                display: flex;\n                justify-content: flex-end;\n                padding: 1rem;\n            }\n\n            .modal-footer button {\n                background-color: #ccc;\n                border: none;\n                border-radius: 5px;\n                color: white;\n                font-size: 16px;\n                padding: 12px 24px;\n                text-align: center;\n                text-decoration: none;\n                display: inline-block;\n                margin: 4px 2px;\n                transition-duration: 0.4s;\n            }\n\n            .modal-footer button.active {\n                background-color: hsl(207, 85%, 69%);\n                cursor: pointer;\n            }\n        </style>\n\n\n        <div class="modal">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h2>Imagen destacada</h2>\n                    <span class="close">&times;</span>\n                </div>\n                <div class="modal-body">\n                    <div class="tabs-container-menu">\n                        <div class="tabs-container-items">\n                            <ul>\n                                <li id="gallery-content" class="active">Galería</li>\n                                <li id="upload-content">Subir imagen</li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="tabs-container-content">\n                        <div class="tab active" id="gallery-content">\n                            <div class="image-gallery">\n                            </div>\n                            <div class="image-gallery-loader">\n                                <div class="image-gallery-information">\n                                    <div class="image-gallery-loader-form">\n                                        <label for="title">Título</label>\n                                        <input type="text" name="title" />\n                                    </div>\n                                    <div class="image-gallery-loader-form">\n                                        <label for="description">Texto alternativo</label>\n                                        <input type="text" name="alt" />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="tab" id="upload-content">\n                            <div class="upload-image">\n                                <label for="file">Subir imagen</label>\n                                <input type="file" id="file" name="file" accept="image/*" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn btn-primary">Elegir imagen</button>\n                </div>\n            </div>\n        </div>\n        ',await this.getThumbnails(),this.shadow.querySelector(".close").addEventListener("click",(()=>{this.closeGallery()})),this.shadow.querySelectorAll(".tabs-container-menu li").forEach((e=>{e.addEventListener("click",(()=>{this.changeTab(e)}))})),this.shadow.querySelectorAll(".image").forEach((e=>{e.addEventListener("click",(()=>{this.selectImage(e)}))})),this.shadow.querySelector('input[type="file"]').addEventListener("change",(async e=>{this.uploadImage(e.target.files[0])})),this.shadow.querySelector(".modal-footer button").addEventListener("click",(e=>{e.target.classList.contains("active")&&this.sendDataToForm()}))}async openGallery(e){document.dispatchEvent(new CustomEvent("showOverlayer")),this.shadow.querySelector(".modal").classList.add("active"),this.setAttribute("name",e.name),this.setAttribute("languageAlias",e.languageAlias),this.shadow.querySelector('input[name="title"]').value=e.title,this.shadow.querySelector('input[name="alt"]').value=e.alt;let t=this.shadow.querySelector(`.image[data-filename="${e.filename}"]`);t&&(t.classList.add("selected"),this.shadow.querySelector(".modal-footer button").classList.add("active"),this.updateFile=e.filename)}async changeTab(e){this.shadow.querySelectorAll(".tabs-container-menu li").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),this.shadow.querySelectorAll(".tabs-container-content .tab").forEach((e=>{e.classList.remove("active")})),this.shadow.querySelector(`.tabs-container-content .tab#${e.id}`).classList.add("active")}async getThumbnails(){try{let t=await fetch(`${e}/api/admin/image-gallery`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}),n=await t.json(),a="";n.filenames.forEach((t=>{a+=`\n                    <div class="image" data-filename="${t}">\n                        <img src="${e}/api/admin/image-gallery/${t}" />\n                    </div>\n                `})),this.shadow.querySelector(".image-gallery").innerHTML=a}catch(e){console.log(e)}}async uploadImage(t){let n=new FormData;n.append("file",t);let a=await fetch(`${e}/api/admin/image-gallery`,{method:"POST",headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:n}),i=await a.json();this.shadow.querySelectorAll(".image").forEach((e=>{e.classList.remove("selected")})),i.forEach((t=>{const n=document.createElement("div"),a=document.createElement("img");n.classList.add("image","selected"),n.setAttribute("data-filename",t),a.src=`${e}/api/admin/image-gallery/${t}`,n.addEventListener("click",(()=>{this.shadow.querySelectorAll(".image").forEach((e=>{e.classList.remove("selected")})),n.classList.add("selected")})),n.appendChild(a),this.shadow.querySelector(".image-gallery").prepend(n)})),this.shadow.querySelectorAll(".tabs-container-menu li").forEach((e=>{e.classList.remove("active")})),this.shadow.querySelector("li#gallery-content").classList.add("active"),this.shadow.querySelectorAll(".tab").forEach((e=>{e.classList.remove("active")})),this.shadow.querySelector(".tab#gallery-content").classList.add("active"),this.shadow.querySelector(".modal-footer button").classList.add("active"),this.shadow.querySelector('input[name="alt"]').value="",this.shadow.querySelector('input[name="title"]').value=""}async selectImage(e){this.shadow.querySelectorAll(".image").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),this.shadow.querySelector(".modal-footer button").classList.add("active")}async sendDataToForm(){let e={};e.name=this.getAttribute("name"),e.alt=this.shadow.querySelector('input[name="alt"]').value,e.title=this.shadow.querySelector('input[name="title"]').value,e.languageAlias=this.getAttribute("languageAlias"),e.filename=this.shadow.querySelector(".image.selected").getAttribute("data-filename"),this.updateFile?(console.log(e),document.dispatchEvent(new CustomEvent("updateThumbnail",{detail:{previousImage:this.updateFile,image:e}}))):document.dispatchEvent(new CustomEvent("createThumbnail",{detail:{image:e}})),document.dispatchEvent(new CustomEvent("hideOverlayer")),this.updateFile=null,this.closeGallery()}async closeGallery(){document.dispatchEvent(new CustomEvent("hideOverlayer")),this.shadow.querySelector(".modal-footer button").classList.remove("active"),this.shadow.querySelectorAll(".image").forEach((e=>{e.classList.remove("selected")})),this.shadow.querySelector(".modal").classList.remove("active")}}customElements.define("image-gallery-component",r),n(76)})()})();